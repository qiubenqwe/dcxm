<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <canvas id="can"></canvas>
    <script>
        var canvas=document.getElementById("can");
        var ctx=canvas.getContext("2d");
        var ch=canvas.height=window.innerHeight;
        var cw=canvas.width=window.innerWidth;
        var x=300;
        var y=400;
        var init=function(){
            this.x=Math.random()*cw;
            this.y=Math.random()*ch;
            this.r=3;
            this.speedX=parseInt(Math.random()*2+2)>=3?-2:2;
            this.speedY=parseInt(Math.random()*2+2)>=3?-2:2;
        }
        var speedX=2;
        var speedY=2;

        var arr=[];
        for(var i=0;i<40;i++){
            arr.push(new init);
        }

        setInterval(function(){
            ctx.fillStyle="rgba(0,0,0,0.05)";
            ctx.fillRect(0,0,cw,ch);
            for(var i=0;i<arr.length;i++){
                var now=arr[i];
                //碰撞反弹
                if(now.x>=cw||now.x<=0){
                    now.speedX=-now.speedX;
                    now.speedY=now.speedY;
                }
                if(now.y>=ch||now.y<=0){
                    now.speedX=now.speedX;
                    now.speedY=-now.speedY;
                }
                ctx.beginPath();
                ctx.arc(now.x,now.y,now.r,0,Math.PI*2);
                ctx.fillStyle="blue";
                ctx.fill();
                now.x+=now.speedX;
                now.y+=now.speedY;
                ctx.closePath();
            }
            },1000/60)
            
    </script>
</body>
</html>